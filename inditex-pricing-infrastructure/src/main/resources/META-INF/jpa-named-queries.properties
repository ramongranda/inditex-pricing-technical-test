# Query to get the best applicable price (highest priority, date within range)
PriceEntity.findBest=\
SELECT * FROM PRICES p \
WHERE p.BRAND_ID = :brandId \
AND p.PRODUCT_ID = :productId \
AND :at BETWEEN p.START_DATE AND p.END_DATE \
ORDER BY p.PRIORITY DESC, p.START_DATE DESC \
LIMIT 1
